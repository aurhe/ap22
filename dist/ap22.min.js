m=Object.keys(this);o=300;s=r=0;x=y=o/2;d=[];p=a.width;q=a.height;t=Math.floor(p/o/2);v=Math.floor(q/o/2);z=a=>c.fillStyle='rgb('+[a,a,a]+')';w=(a,b,e,f,h,k,g=1,i,j)=>{c.beginPath();c.moveTo((a-x)*g,(b-y)*g);c.lineTo((e-x)*g,(f-y)*g);c.lineTo((e-x)*h,(f-y)*h);c.lineTo((a-x)*h,(b-y)*h);c.closePath();z(k);c.fill();c.stroke();for(g=1;(g+=.2)<h-.3;)for(b^f?(i=b,j=f):(i=a,j=e);(i+=34)<j-32;)b^f?w(a,i,a,i+32,g,k-32,g+.1):w(i,b,i+32,b,g,k-32,g+.1)};setInterval(`s+=d[38]?.1:d[40]?-.1:-s*.01;Math.abs(s)>.09?x+=s*Math.sin(r+=d[37]?-.1:d[39]?.1:0):0;y-=s*Math.cos(r);a=Math.floor(x/o);b=Math.floor(y/o);a%9&&b%9?s=-s:0;c.save();z(64);c.fillRect(0,0,p,q);c.translate(p/2,q/2);z(99);for(e=[],i=a-t-2;i++<a+t+1;)for(j=b-v-2;j++<b+v+1;)if(i%9&&j%9)e.push({x:i,y:j,h:Math.hypot(i*o-x+o/2,j*o-y+o/2)}),c.fillRect((i*o-x-64),(j*o-y-64),o+128,o+128);e.sort((a,b)=>b.h-a.h);for(i of e)a=i.x*o,b=i.y*o,f=a+o,j=b+o,k=m[Math.abs(i.x+i.y)%m.length].length,h=2+k%16/16,k=32+k%6*16,b>y?w(a,b,f,b,h,k):j<y?w(a,j,f,j,h,k+24):0,f<x?w(f,b,f,j,h,k+16):a>x?w(a,b,a,j,h,k+8):0,z(k),c.fillRect((a-x)*h,(b-y)*h,o*h,o*h);c.rotate(r);c.fillStyle='#911';c.fillRect(-16,-32,32,64);z(32);c.fillRect(-14,-16,28,40);c.fillStyle='#911';c.fillRect(-13,-6,26,24);c.restore()`,16);onkeydown=onkeyup=a=>d[a.which]=a.type[5]